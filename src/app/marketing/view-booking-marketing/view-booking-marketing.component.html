<mat-card class="container">

  <div fxLayout="row wrap" fxLayoutGap="2%" fxLayout.lt-md="column">
    <mat-form-field fxFlex="20%">
      <mat-label>{{'Marketing.ViewBookingMarketing.campainName'| translate }}</mat-label>
      <mat-select [formControl]="filterCampaign">
        <mat-option *ngFor="let campaign of campaigns" [value]="campaign">
          {{ campaign.campaign.campainName }}
        </mat-option>
      </mat-select>
    </mat-form-field>
    <div fxFlex="18%" *ngIf="campaign">
      <div fxLayout="row">
        <img src="assets/images/icons/warning.svg">
        <div fxLayout="column">
          <p
            style="font-size: 18px; font-weight: bold; margin: 2px;">{{campaign.campaign.timeNotify | date:'HH:mm'}}</p>
          <span>{{'Marketing.ViewBookingMarketing.timeNotify'| translate }}({{campaign.campaign.timeNotify | date:'dd-MM-yyyy'}})</span>
        </div>
      </div>
    </div>
    <div fxFlex="18%" *ngIf="campaign">
      <div fxLayout="row">
        <img src="assets/images/icons/start.svg">
        <div fxLayout="column">
          <p
            style="font-size: 18px; font-weight: bold; margin: 2px;">{{campaign.campaign.fromDate | date:'HH:mm'}}</p>
          <span>{{'Marketing.ViewBookingMarketing.fromDate'| translate }}({{campaign.campaign.fromDate | date:'dd-MM-yyyy'}})</span>
        </div>
      </div>
    </div>
    <div fxFlex="18%" *ngIf="campaign">
      <div fxLayout="row">
        <img src="assets/images/icons/end.svg">
        <div fxLayout="column">
          <p
            style="font-size: 18px; font-weight: bold; margin: 2px;">{{campaign.campaign.toDate | date:'HH:mm'}}</p>
          <span>{{'Marketing.ViewBookingMarketing.toDate'| translate }}({{campaign.campaign.toDate | date:'dd-MM-yyyy'}})</span>
        </div>
      </div>
    </div>
    <div fxFlex="18%" *ngIf="campaign">
      <div fxLayout="row">
        <img src="assets/images/icons/end.svg">
        <div fxLayout="column">
          <p
            style="font-size: 18px; font-weight: bold; margin: 2px;">{{campaign.campaign.secondRemain / 60}}'</p>
          <span>{{'Marketing.ViewBookingMarketing.secondRemain'| translate }}</span>
        </div>
      </div>
    </div>
  </div>
  <div>
    <h3>{{'Marketing.ViewBookingMarketing.details'| translate }}</h3>
    <div *ngIf="campaign" fxLayout="row wrap" fxLayoutGap="2%" fxLayout.lt-md="column">
      <div fxFlex="20%" fxLayout="column">
        <div fxFlex="30%" *ngIf="campaign">
          <div fxLayout="row" style="margin: 8px;">
            <img src="assets/images/icons/money-deposit.svg">
            <div fxLayout="column">
              <p
                style="font-size: 18px; font-weight: bold; margin: 2px; color: #1fb050;">{{campaign.campaign.budget | money}}</p>
              <span>{{'Marketing.ViewBookingMarketing.budget'| translate }}</span>
            </div>
          </div>
        </div>
        <div fxFlex="30%" *ngIf="campaign">
          <div fxLayout="row" style="margin: 8px;">
            <img src="assets/images/icons/bill_booking.svg">
            <div fxLayout="column">
              <p
                style="font-size: 18px; font-weight: bold; margin: 2px; color: #1fb050;">{{sumBooking | money}}</p>
              <span>{{'Marketing.ViewBookingMarketing.sumBooking'| translate }}</span>
            </div>
          </div>
        </div>
        <div fxFlex="30%" *ngIf="campaign && campaign.campaign.cashRule === -1">
          <div fxLayout="row" style="margin: 8px;">
            <img src="assets/images/icons/fast-delivery.svg">
            <div fxLayout="column">
              <p
                style="font-size: 18px; font-weight: bold; margin: 2px;">{{'Marketing.ViewBookingMarketing.now'| translate }}</p>
              <span>{{'Marketing.ViewBookingMarketing.first'| translate }}</span>
            </div>
          </div>
        </div>
        <div fxFlex="30%" *ngIf="campaign && campaign.campaign.cashRule !== -1">
          <div fxLayout="row" style="margin: 8px;">
            <img src="assets/images/icons/delay.svg">
            <div fxLayout="column">
              <p
                style="font-size: 18px; font-weight: bold; margin: 2px;">{{'Marketing.ViewBookingMarketing.wait'| translate }} {{campaign.campaign.cashRule}}{{'Marketing.ViewBookingMarketing.mins'| translate }}</p>
              <span>{{'Marketing.ViewBookingMarketing.cashRule'| translate }}</span>
            </div>
          </div>
        </div>
        <button mat-raised-button *ngIf="campaign" style="float: right;"
                [routerLink]="['/marketing/booking',campaign.campaign.refid]">{{'Marketing.ViewBookingMarketing.btnEdit'| translate }}
        </button>
      </div>
      <div fxFlex="75%">
        <table mat-table [dataSource]="cards" matSort
               multiTemplateDataRows>
          <!-- Name Column -->
          <ng-container matColumnDef="cardType">
            <th mat-header-cell *matHeaderCellDef
            >{{'Marketing.ViewBookingMarketing.cardType'| translate }}
            </th>
            <td mat-cell *matCellDef="let row"> {{row.cardType}} </td>
          </ng-container>

          <!-- Account no Column -->
          <ng-container matColumnDef="costRate">
            <th mat-header-cell *matHeaderCellDef
            > {{'Marketing.ViewBookingMarketing.costRate'| translate }}
            </th>
            <td mat-cell fxHide fxShow.gt-md *matCellDef="let row"> {{row.costRate}} </td>
          </ng-container>

          <!-- External ID Column -->
          <ng-container matColumnDef="cogsRate">
            <th mat-header-cell d *matHeaderCellDef
            > {{'Marketing.ViewBookingMarketing.cogsRate'| translate }}
            </th>
            <td mat-cell fxHide fxShow.gt-md *matCellDef="let row"> {{row.cogsRate}} </td>
          </ng-container>


          <ng-container matColumnDef="minRate">
            <th mat-header-cell *matHeaderCellDef
            >{{'Marketing.ViewBookingMarketing.minRate'| translate }}
            </th>
            <td mat-cell fxHide fxShow.gt-md *matCellDef="let row"> {{row.minRate}} </td>
          </ng-container>


          <tr mat-header-row *matHeaderRowDef="displayedCardColumns"></tr>
          <tr mat-row *matRowDef="let element; columns: displayedCardColumns;"
              class="example-element-row">
          </tr>
        </table>
      </div>
    </div>
  </div>
  <div *ngIf="campaign" fxLayout="row wrap" fxLayoutGap="2%" fxLayout.lt-md="column" style="margin-top: 20px;">
    <div fxFlex="96%" *ngIf="campaign">
      <div fxLayout="row wrap" fxLayoutGap="2%" fxLayout.lt-md="column">
        <h3 fxFlex="48%">{{'Marketing.ViewBookingMarketing.bookingLength'| translate }}{{booking?.length}}</h3>
        <div fxFlex="48%">
          <button style="float: right;"
                  (click)="addBookingDialog()"
                  mat-raised-button color="primary">ThÃªm
          </button>
        </div>
      </div>
      <table class="mat-elevation-z8" mat-table [dataSource]="booking" matSort multiTemplateDataRows>
        <!-- Name Column -->
        <ng-container matColumnDef="createdDate">
          <th mat-header-cell *matHeaderCellDef> {{'Marketing.ViewBookingMarketing.createdDate'| translate }}</th>
          <td mat-cell *matCellDef="let row"> {{row.createdDate | date:'dd-MM-yyyy HH:mm'}} </td>
        </ng-container>

        <!-- Account no Column -->
        <ng-container matColumnDef="officeId">
          <th mat-header-cell *matHeaderCellDef> {{'Marketing.ViewBookingMarketing.officeId'| translate }}</th>
          <td mat-cell *matCellDef="let row"> {{row.officeId}} </td>
        </ng-container>

        <!-- External ID Column -->
        <ng-container matColumnDef="userIdStaff">
          <th mat-header-cell *matHeaderCellDef> {{'Marketing.ViewBookingMarketing.userIdStaff'| translate }}</th>
          <td mat-cell *matCellDef="let row"> {{row.userIdStaff}} </td>
        </ng-container>

        <!-- External ID Column -->
        <ng-container matColumnDef="userNameTelegram">
          <th mat-header-cell *matHeaderCellDef> {{'Marketing.ViewBookingMarketing.userNameTelegram'| translate }}</th>
          <td mat-cell *matCellDef="let row"> {{row.userNameTelegram}}<span
            *ngIf="row.createdBy === 'S'">- {{row.userIdTelegram}}</span></td>
        </ng-container>

        <!-- External ID Column -->
        <ng-container matColumnDef="bookingAmount">
          <th mat-header-cell *matHeaderCellDef>{{'Marketing.ViewBookingMarketing.bookingAmount'| translate }}</th>
          <td mat-cell *matCellDef="let row"> {{row.bookingAmount | money}} </td>
        </ng-container>

        <ng-container matColumnDef="actions">
          <th mat-header-cell *matHeaderCellDef>{{'Marketing.ViewBookingMarketing.Actions'| translate }}</th>
          <td mat-cell *matCellDef="let row">
            <div fxLayout="row">
              <span (click)="EditBookingDialog(row)" style="margin-right: 5px;"><img src="assets/images/icons/edit.svg"></span>
              &nbsp;
              <span (click)="RemoveBookingDialog(row)" style="margin-right: 5px;"><img
                src="assets/images/icons/delete.svg"></span>
            </div>
          </td>
        </ng-container>
        <!--          <ng-container matColumnDef="expandedDetail">-->
        <!--            <td mat-cell fxShow fxHide.gt-md *matCellDef="let element" [attr.colspan]="displayedColumns.length">-->
        <!--              <div class="example-element-detail"-->
        <!--                   [@detailExpand]="element == expandedElement ? 'expanded' : 'collapsed'">-->
        <!--                <div class="example-element-description" fxLayout="column">-->
        <!--                  <div>-->
        <!--                    <span style="font-weight: bold;">{{ 'Client_Component.tblColAccount'| translate}} :</span> &nbsp;{{element.accountNo}}-->
        <!--                  </div>-->
        <!--                  <div>-->
        <!--                    <span style="font-weight: bold;"> {{ 'Client_Component.tblColExternalID'| translate}} :</span> &nbsp;{{element.externalId}}-->
        <!--                  </div>-->
        <!--                  <div>-->
        <!--                    <span style="font-weight: bold;"> {{ 'Client_Component.tblColMobileNumber'| translate}} :</span> &nbsp;{{element.mobileNo}}-->
        <!--                  </div>-->
        <!--                  <div>-->
        <!--                    <span style="font-weight: bold;"> {{ 'Client_Component.tblColGender'| translate}} :</span> &nbsp;{{element.gender.name}}-->
        <!--                  </div>-->
        <!--                  <div>-->
        <!--                    <span style="font-weight: bold;"> {{ 'Client_Component.tblColOfficeName'| translate}} :</span> &nbsp;{{element.officeName}}-->
        <!--                  </div>-->
        <!--                  <div>-->
        <!--                    <span style="font-weight: bold;"> {{ 'Client_Component.tblColStaffName'| translate}} :</span> &nbsp;{{element.staffName}}-->
        <!--                  </div>-->
        <!--                </div>-->
        <!--              </div>-->
        <!--            </td>-->
        <!--          </ng-container>-->

        <ng-container matColumnDef="link">
          <th mat-header-cell *matHeaderCellDef></th>
          <td mat-cell *matCellDef="let row">
            <button mat-mini-fab color="primary" [routerLink]="[row.id,'general']"
                    [queryParams]="{ typeViewClient: 'view'}"

                    [matTooltip]="'ShareLabel.lblViewDetail'| translate" matTooltipPosition="above">
              <i class="fa fa-address-card" aria-hidden="true"></i></button>
          </td>
        </ng-container>

        <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
        <tr mat-row *matRowDef="let element; columns: displayedColumns;"
            class="example-element-row"
            [class.example-expanded-row]="expandedElement === element"
            (click)="expandedElement = expandedElement === element ? null : element"
        >
        </tr>
        <!--          <tr mat-row *matRowDef="let row; columns: ['expandedDetail']" class="example-detail-row"></tr>-->
      </table>

      <mat-paginator [length]="booking?.length" [pageSize]="10" [pageSizeOptions]="[10, 25, 50, 100]"
                     showFirstLastButtons></mat-paginator>
    </div>
  </div>

</mat-card>
