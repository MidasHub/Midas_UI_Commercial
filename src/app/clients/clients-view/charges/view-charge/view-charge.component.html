<div fxLayout="row" fxLayoutAlign="end" fxLayoutGap="2%" fxLayout.lt-md="column" class="container m-b-20">
  <button mat-raised-button color="primary" [routerLink]="['pay']" *midasHasPermission="'PAY_CLIENTCHARGE'">
    <fa-icon icon="dollar-sign"></fa-icon>&nbsp;&nbsp;
    {{'Client_Component.ViewClient.Charges.View.btnPay' |translate}}
  </button>
  <button mat-raised-button color="primary" (click)="waiveCharge()" *midasHasPermission="'WAIVE_CLIENTCHARGE'">
    <i class="fa fa-flag"></i>
    {{'Client_Component.ViewClient.Charges.View.btnWaiveCharge' |translate}}
  </button>
  <button mat-raised-button color="primary" (click)="deleteCharge()">
    <fa-icon icon="trash"></fa-icon>&nbsp;&nbsp;
    {{'Client_Component.ViewClient.Charges.View.btnDelete' |translate}}
  </button>
</div>

<div class="container">

  <mat-card>

    <mat-card-title> <i class="fa fa-stop" [ngClass]="(!(chargeData.isWaived || chargeData.isPaid))|statusLookup"></i>
      {{ chargeData.name }}
    </mat-card-title>

    <mat-divider></mat-divider>

    <mat-card-content>

      <div class="share-account-tables" fxLayout="row wrap" fxFlex="50%" class="p-t-20">

        <table>

          <tbody>

            <tr>
              <td> {{'Client_Component.ViewClient.Charges.View.currency' |translate}} </td>
              <td> {{ chargeData.currency.name }} </td>
            </tr>

            <tr>
              <td> {{'Client_Component.ViewClient.Charges.View.chargeTimeType' |translate}} </td>
              <td> {{ chargeData.chargeTimeType.value }} </td>
            </tr>

            <tr>
              <td> {{'Client_Component.ViewClient.Charges.View.chargeCalculationType' |translate}} </td>
              <td> {{ chargeData.chargeCalculationType.value }} </td>
            </tr>

            <tr>
              <td> {{'Client_Component.ViewClient.Charges.View.dueDate' |translate}} </td>
              <td> {{ chargeData.dueDate | date }} </td>
            </tr>

            <tr>
              <td> {{'Client_Component.ViewClient.Charges.View.amount' |translate}} </td>
              <td> {{ chargeData.amount | money}} </td>
            </tr>

            <tr>
              <td> {{'Client_Component.ViewClient.Charges.View.amountPaid' |translate}} </td>
              <td> {{ chargeData.amountPaid | money}} </td>
            </tr>

            <tr>
              <td> {{'Client_Component.ViewClient.Charges.View.amountWaived' |translate}} </td>
              <td> {{ chargeData.amountWaived | money}} </td>
            </tr>
            <tr>
              <td> {{'Client_Component.ViewClient.Charges.View.amountOutstanding' |translate}} </td>
              <td> {{ chargeData.amountOutstanding | money}} </td>
            </tr>

          </tbody>

        </table>

      </div>

    </mat-card-content>

    <div fxLayout="row wrap" class="content" style="padding-top:10px">
      <h1><b> {{'Client_Component.ViewClient.Charges.View.h2' |translate}} </b></h1>

      <table mat-table [dataSource]="chargeData.clientTransactionDatas" *ngIf="chargeData.clientTransactionDatas">

        <ng-container matColumnDef="id">
          <th mat-header-cell *matHeaderCellDef> {{'Client_Component.ViewClient.Charges.View.id' |translate}} </th>
          <td mat-cell *matCellDef="let element" [ngClass]="{'strikeoff':element.reversed}"> {{element.id}} </td>
        </ng-container>

        <ng-container matColumnDef="officeName">
          <th mat-header-cell *matHeaderCellDef> {{'Client_Component.ViewClient.Charges.View.officeName' |translate}} </th>
          <td mat-cell *matCellDef="let element" [ngClass]="{'strikeoff':element.reversed}"> {{element.officeName }} </td>
        </ng-container>

        <ng-container matColumnDef="type">
          <th mat-header-cell *matHeaderCellDef> {{'Client_Component.ViewClient.Charges.View.type' |translate}} </th>
          <td mat-cell *matCellDef="let element" [ngClass]="{'strikeoff':element.reversed}"> {{element.type.value}} </td>
        </ng-container>
        <ng-container matColumnDef="transactionDate">
          <th mat-header-cell *matHeaderCellDef> {{'Client_Component.ViewClient.Charges.View.transactionDate' |translate}} </th>
          <td mat-cell *matCellDef="let element" [ngClass]="{'strikeoff':element.reversed}"> {{element.date | date}} </td>
        </ng-container>

        <ng-container matColumnDef="amount">
          <th mat-header-cell *matHeaderCellDef> {{'Client_Component.ViewClient.Charges.View.amount_2' |translate}} </th>
          <td mat-cell *matCellDef="let element" [ngClass]="{'strikeoff':element.reversed}"> {{element.amount}} </td>
        </ng-container>

        <ng-container matColumnDef="actions">
          <th mat-header-cell *matHeaderCellDef> {{'Client_Component.ViewClient.Charges.View.actions' |translate}} </th>
          <td mat-cell *matCellDef="let element" [ngClass]="{'strikeoff':element.reversed}">
            <button mat-raised-button color="primary" (click)="undoTransaction(element.id)" class="delBtn">
              <fa-icon icon="trash"></fa-icon>&nbsp;&nbsp;
            </button>
          </td>
        </ng-container>

        <tr mat-header-row *matHeaderRowDef="viewChargeTableColumns"></tr>
        <tr mat-row *matRowDef="let row; columns: viewChargeTableColumns;"></tr>
      </table>

    </div>


    <mat-card-actions fxLayout="row" fxLayout.xs="column" fxLayoutAlign="center" fxLayoutGap="5px">
      <button type="button" mat-raised-button [routerLink]="['../../','general']">{{ "ShareButton.BackEng" | translate }}</button>
    </mat-card-actions>

  </mat-card>

</div>
