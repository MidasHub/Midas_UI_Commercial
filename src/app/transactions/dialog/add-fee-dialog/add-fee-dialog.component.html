<h1 mat-dialog-title>{{ "Transactions.Dialog.AddFee.title" | translate }} [{{ txnCode }}]</h1>
<div mat-dialog-content>
  <span style="color: #e74c3c">{{ messageError }}</span>
  <div class="custom-files-input" fxLayout="column">
    <div fxLayout="column" *ngIf="transactionPaid && transactionPaid.status == 'A' " [formGroup]="formDialogPaid">
      <h3>{{ "Transactions.Dialog.AddFee.accountPay" | translate }}</h3>
      <div fxLayout="row swap" fxLayoutAlign.lt-sm="center" fxLayoutGap="2%" fxLayout.lt-sm="column">
        <mat-form-field fxFlex="30%" *ngIf="formDialogPaid.contains('paymentCode')" class="input_custom">
          <mat-label>{{ "Transactions.Dialog.AddFee.paymentCode" | translate }}</mat-label>
          <mat-select [disabled]="isBATCH" required formControlName="paymentCode">
            <mat-option
              *ngFor="let type of paidPaymentType"
              [fxHide]="type.code === 'AM' || type.code === 'AR'"
              [value]="type.code"
            >
              {{ type.desc }}
            </mat-option>
          </mat-select>
        </mat-form-field>

        <mat-form-field fxFlex="40%" *ngIf="formDialogPaid.contains('savingAccountPaid')" class="input_custom">
          <mat-label>{{ "Transactions.Dialog.AddFee.savingAccountPaid" | translate }}</mat-label>
          <mat-select required formControlName="savingAccountPaid">
            <mat-option *ngFor="let type of accountsPaid" [fxHide]="type.hide" [value]="type.id">
              {{ displaySavingAccount(type.externalId, type.accountNo) }}
              <span style="color: red;"> ({{  type.balance | money }})</span>
            </mat-option>
          </mat-select>
        </mat-form-field>
        <mat-form-field fxFlex="20%">
          <mat-label>{{ "Transactions.Dialog.AddFee.amountPaid" | translate }}({{ paidAmount | money }})</mat-label>
          <input matInput required currencyMask formControlName="amountPaid" />
          <mat-error *ngIf="formDialogPaid.controls.amountPaid.hasError('required')"
            >{{ "Transactions.Dialog.AddFee.erramountPaid" | translate }}
          </mat-error>
        </mat-form-field>
        <mat-form-field fxFlex="96%" *ngIf="formDialogPaid.contains('routingCodePartner')" class="input_custom">
          <mat-label>{{ "Transactions.Dialog.AddFee.routingCodePartner" | translate }}</mat-label>
          <mat-select required formControlName="routingCodePartner">
            <mat-option *ngFor="let partner of partners"  [value]="partner.code">
              {{ partner.desc }}
            </mat-option>
          </mat-select>
        </mat-form-field>
        <mat-form-field fxFlex="96%">
          <mat-label>{{ "Transactions.Dialog.AddFee.notePaid" | translate }}</mat-label>
          <textarea matTextareaAutosize matInput formControlName="notePaid"></textarea>
        </mat-form-field>
      </div>
    </div>
    <div fxLayout="column" *ngIf="transactionFee && showGet && transactionFee.status == 'A'" [formGroup]="formDialogGet">
      <h3>{{ "Transactions.Dialog.AddFee.accountReceive" | translate }}</h3>
      <div fxLayout="row swap" fxLayoutAlign.lt-sm="center" fxLayoutGap="2%" fxLayout.lt-sm="column">
        <mat-form-field fxFlex="30%" *ngIf="formDialogGet.contains('paymentCodeGet')" class="input_custom">
          <mat-label>{{ "Transactions.Dialog.AddFee.paymentCodeGet" | translate }}c</mat-label>
          <mat-select required formControlName="paymentCodeGet">
            <mat-option *ngFor="let type of paidPaymentType" [fxHide]="type.code === 'DE'" [value]="type.code">
              {{ type.desc }}
            </mat-option>
          </mat-select>
        </mat-form-field>

        <mat-form-field fxFlex="40%" *ngIf="formDialogGet.contains('savingAccountGet')" class="input_custom">
          <mat-label>{{ "Transactions.Dialog.AddFee.savingAccountGet" | translate }}</mat-label>
          <mat-select required formControlName="savingAccountGet">
            <mat-option *ngFor="let type of accountsFee" [fxHide]="type.hide" [value]="type.id">
              {{ displaySavingAccount(type.externalId, type.accountNo) }}
              <span style="color: red;"> ({{ (type.accountBalance ?  type.accountBalance : type.balance) | money }})</span>
            </mat-option>
          </mat-select>
        </mat-form-field>

        <mat-form-field *ngIf="formDialogGet.contains('amountGet')" fxFlex="20%">
          <mat-label>{{ "Transactions.Dialog.AddFee.amountGet" | translate }}({{ feeAmount | money }})</mat-label>
          <input required currencyMask matInput formControlName="amountGet" />
          <mat-error *ngIf="formDialogGet.controls.amountGet.hasError('required')"
            >{{ "Transactions.Dialog.AddFee.erramountGet" | translate }}
          </mat-error>
        </mat-form-field>

        <mat-form-field *ngIf="formDialogGet.contains('noteGet')" fxFlex="96%">
          <mat-label>{{ "Transactions.Dialog.AddFee.noteGet" | translate }}</mat-label>
          <textarea matTextareaAutosize matInput formControlName="noteGet"></textarea>
        </mat-form-field>
      </div>
    </div>
  </div>
</div>
<div *ngIf="isLoading" style="display: flex; justify-content: center; align-items: center; background: white">
  <mat-progress-spinner color="warn" mode="indeterminate"> </mat-progress-spinner>
</div>
<mat-dialog-actions align="end" *ngIf="!isLoading">
  <button mat-raised-button (click)="dialogRef.close({ status: false })">
    {{ "Shared_Component.DeleteDialog.buttonCancel" | translate }}
  </button>
  <button  mat-raised-button color="warn" (click)="submitForm()">
    {{ "Shared_Component.DeleteDialog.buttonConfirm" | translate }}
  </button>
</mat-dialog-actions>
