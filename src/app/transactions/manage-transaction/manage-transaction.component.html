<div id="midas-manage-transaction">
<mat-card class="mat-elevation-z20" >
  <mat-card-header>
    <div  fxFlex="100%" fxLayout="column"  fxLayout.gt-sm="row"
          fxLayoutAlign="center stretch" fxLayoutAlign.gt-sm=" center center"
          fxLayoutGap="2%"
          [formGroup]="formDate">
      <mat-form-field fxFlex.gt-sm="31" fxFlex="95%">
        <mat-label>{{'Transactions.ManageTransactionComponent.fromDate'|translate}}</mat-label>
        <input matInput [matDatepicker]="transactionDateFromPicker" formControlName="fromDate" />
        <mat-datepicker-toggle matSuffix [for]="transactionDateFromPicker"></mat-datepicker-toggle>
        <mat-datepicker #transactionDateFromPicker></mat-datepicker>
      </mat-form-field>

      <mat-form-field fxFlex.gt-sm="31" fxFlex="95%">
        <mat-label>{{'Transactions.ManageTransactionComponent.toDate'|translate}}</mat-label>
        <input matInput [matDatepicker]="transactionDateToPicker" formControlName="toDate" />
        <mat-datepicker-toggle matSuffix [for]="transactionDateToPicker"></mat-datepicker-toggle>
        <mat-datepicker #transactionDateToPicker></mat-datepicker>
      </mat-form-field>
      <div fxFlex.gt-sm="31" fxFlex="95%" fxLayout="row" fxLayoutAlign=" center center">
        <button
          *ngIf="fromDateAndToDate"
          (click)="getTransaction()"
          style="align-self: center"
          color="primary"
          mat-raised-button
        >
        {{'Transactions.ManageTransactionComponent.search'|translate}} &nbsp;<i class="fa fa-search" aria-hidden="true"></i>
        </button>
        <!-- <div fxFlex="18%">
          <button style="margin: 5px; height: 40px" (click)="openPDF()" color="primary" mat-raised-button>
            open PDF
          </button>
        </div> -->
        <h3 *ngIf="!fromDateAndToDate">
          {{'Transactions.ManageTransactionComponent.selectTime'|translate}}&nbsp; <i class="fa fa-calendar" style="align-self: center" aria-hidden="true"></i>
        </h3>

        <button
          *midasHasPermission="'POS_UPDATE'"
          (click)="submitTransactionUpToNow()"
          style="align-self: center; margin-left: 20px"
          color=""
          mat-raised-button
        >
        {{'Transactions.ManageTransactionComponent.confirm'|translate}} &nbsp;<i class="fa fa-archive" aria-hidden="true"></i>
        </button>
      </div>
    </div>

  </mat-card-header>

  <mat-card-content fxLayout="column"  fxLayoutAlign="center stretch">
<!--  Show các số liệu tổng  -->
    <mat-card class="sum-area">

      <mat-card-content fxLayout="column"  fxLayout.gt-sm="row"
                        fxLayoutAlign="center stretch" fxLayoutAlign.gt-sm="space-evenly center"
                        fxLayoutGap="2%" >
        <div fxLayout="row wrap" fxFlex="18%" class="sum-item">
          <img src="assets/images/icons/transaction_total.svg" />
          <div fxLayout="column">
            <span class="sum-value">{{ filterData?.length }}</span>
            <span class="sum-lable">{{'Transactions.ManageTransactionComponent.total'|translate}} </span>
          </div>
        </div>
        <div fxLayout="row wrap" fxFlex="20%" class="sum-item">
          <img src="assets/images/icons/money.svg" />
          <div  fxLayout="column">
            <span class="sum-value">{{ totalTerminalAmount | money }}</span>
            <span class="sum-lable">{{'Transactions.ManageTransactionComponent.totalTerminalAmount'|translate}}</span>
          </div>
        </div>
        <div fxLayout="row wrap" fxFlex="20%" class="sum-item">
          <img src="assets/images/icons/transaction.svg" />
          <div fxLayout="column">
            <span class="sum-value">{{ totalFeeAmount | money }}</span>
            <span class="sum-lable">{{'Transactions.ManageTransactionComponent.totalFeeAmount'|translate}}({{ (totalFeeAmount / totalTerminalAmount) * 100 | number: "1.0-2" }}%)</span>
          </div>
        </div>
        <!-- <div fxLayout="row wrap" *midasHasPermission="'POS_UPDATE'" fxFlex="20%" class="sum-item">
          <img src="assets/images/icons/capital.svg" />
          <div style="display: flex" fxLayout="column">
            <span class="sum_value">{{ totalCogsAmount | money }}</span>
            <span class="sum_label">&nbsp; SP vốn</span>
          </div>
        </div> -->
        <div *midasHasPermission="'POS_UPDATE'" fxLayout="row wrap" fxFlex="20%" class="sum-item">
          <img src="assets/images/icons/pnlAmount.svg" />
          <div fxLayout="column">
            <span class="sum-value">{{ totalPnlAmount | money }}</span>
            <span class="sum-lable">{{'Transactions.ManageTransactionComponent.PNL'|translate}}</span>
          </div>
        </div>
      </mat-card-content>
    </mat-card>
<!--  Kết thúc  -->
<!--  Các điều kiện tìm kiếm  -->
    <mat-accordion class="search-area">
      <mat-expansion-panel expanded="false" (opened)="panelOpenState = true" (closed)="panelOpenState = false">
        <mat-expansion-panel-header>
          <mat-panel-title> {{'Transactions.ManageTransactionComponent.title'|translate}}</mat-panel-title>
        </mat-expansion-panel-header>
        <div fxLayout="row wrap" fxLayoutGap="2%" fxLayout.lt-md="column" [formGroup]="formFilter">

          <mat-form-field fxFlex="18%" >
            <mat-label>{{'Transactions.ManageTransactionComponent.officeId'|translate}}</mat-label>
            <input placeholder="Tìm chi nhánh" formControlName="officeId"
              matInput
              (click)="this.resetAutoCompleteOffice()"
              [matAutocomplete]="officeAutocomplete"
            />
          </mat-form-field>

          <mat-autocomplete #officeAutocomplete="matAutocomplete" [displayWith]="displayOffice">
            <mat-option *ngFor="let office of officesOptions | async" [value]="office">
              {{ displayOffice(office) }}
            </mat-option>
          </mat-autocomplete>

          <mat-form-field fxFlex="18%">
            <mat-label>{{'Transactions.ManageTransactionComponent.productId'|translate}}</mat-label>
            <mat-select formControlName="productId">
              <mat-option *ngFor="let type of transactionType" [value]="type.value">
                {{ type.label }}
              </mat-option>
            </mat-select>
          </mat-form-field>

          <mat-form-field fxFlex="18%">
            <mat-label>{{'Transactions.ManageTransactionComponent.status'|translate}}</mat-label>
            <mat-select formControlName="status">
              <mat-option *ngFor="let type of statusOption" [value]="type.value">
                {{ type.label }}
              </mat-option>
            </mat-select>
          </mat-form-field>

          <mat-form-field fxFlex="18%">
            <mat-label>{{'Transactions.ManageTransactionComponent.partnerCode'|translate}}</mat-label>
            <mat-select formControlName="partnerCode">
              <mat-option *ngFor="let type of partners" [value]="type.code">
                {{ type.desc }}
              </mat-option>
            </mat-select>
          </mat-form-field>

          <mat-form-field fxFlex="18%">
            <mat-label>{{'Transactions.ManageTransactionComponent.agencyName'|translate}}</mat-label>
            <input matInput formControlName="agencyName" />
          </mat-form-field>

          <mat-form-field fxFlex="18%">
            <mat-label>{{'Transactions.ManageTransactionComponent.panHolderName'|translate}}</mat-label>
            <input matInput formControlName="panHolderName" />
          </mat-form-field>

          <mat-form-field fxFlex="18%">
            <mat-label>{{'Transactions.ManageTransactionComponent.terminalId'|translate}}</mat-label>
            <input matInput formControlName="terminalId" />
            <!-- <mat-select formControlName="terminalId">
              <mat-option *ngFor="let terminal of terminals" [value]="terminal.terminalId">
                {{ terminal.terminalName }}
              </mat-option>
            </mat-select> -->
          </mat-form-field>

          <mat-form-field fxFlex="18%">
            <mat-label>{{'Transactions.ManageTransactionComponent.traceNo'|translate}}</mat-label>
            <input matInput formControlName="traceNo" />
          </mat-form-field>

          <mat-form-field fxFlex="18%">
            <mat-label>{{'Transactions.ManageTransactionComponent.batchNo'|translate}}</mat-label>
            <input matInput formControlName="batchNo" />
          </mat-form-field>

          <mat-form-field fxFlex="18%">
            <mat-label>{{'Transactions.ManageTransactionComponent.trnRefNo'|translate}}</mat-label>
            <input matInput formControlName="trnRefNo" />
          </mat-form-field>

          <mat-form-field fxFlex="18%">
            <mat-label>{{'Transactions.ManageTransactionComponent.terminalAmount'|translate}}</mat-label>
            <input matInput formControlName="terminalAmount" />
          </mat-form-field>

          <mat-form-field fxFlex="18%">
            <mat-label>{{'Transactions.ManageTransactionComponent.userId'|translate}}</mat-label>
            <mat-select formControlName="userId">
              <mat-option *ngFor="let type of staffs" [value]="type.userId">
                {{ type.displayName }}
              </mat-option>
            </mat-select>
          </mat-form-field>

          <div fxFlex="18%" fxLayout="row wrap" fxLayoutGap="2%" fxLayout.lt-md="column">
            <mat-checkbox fxFlex="100%" labelPosition="before" formControlName="RetailsChoose" class="margin-v">
              {{'Transactions.ManageTransactionComponent.RetailsChoose'|translate}}
            </mat-checkbox>
            <mat-checkbox fxFlex="100%" labelPosition="before" formControlName="wholesaleChoose" class="margin-v">
              {{'Transactions.ManageTransactionComponent.wholesaleChoose'|translate}}
            </mat-checkbox>
            <mat-checkbox fxFlex="100%" labelPosition="before" formControlName="holdTransaction" class="margin-v">
              {{'Transactions.ManageTransactionComponent.holdTransaction'|translate}}
            </mat-checkbox>
          </div>

          <div fxFlex="18%">
            <button style="margin: 5px; height: 40px" (click)="exportTransaction()" color="primary" mat-raised-button>
              {{'Transactions.ManageTransactionComponent.Export'|translate}}
            </button>
            <!-- <button style="margin: 5px; height: 40px" (click)="exportData()" color="primary" mat-raised-button>
              Export
            </button> -->

            <button
              style="margin: 5px; height: 40px"
              (click)="exportTransactionForPartner()"
              color="primary"
              mat-raised-button
            >
            {{'Transactions.ManageTransactionComponent.exportTransactionForPartner'|translate}}
            </button>

            <!-- <button style="margin: 5px; height: 40px" (click)="exportAsXLSX()" color="primary" mat-raised-button>
              Tải danh sách giao dịch
            </button> -->
          </div>
        </div>
      </mat-expansion-panel>
    </mat-accordion>
<!--  Kết thúc  -->
<!--  Bảng chi tiết giao dịch  -->
    <div fxFlex="100%">
    <table
      id="transactionData"
      mat-table
      multiTemplateDataRows
      class="mat-elevation-z8"
      [dataSource]="dataSource"
      matSort
    >
      <ng-container matColumnDef="productId">
        <th mat-header-cell fxHide fxShow.gt-md *matHeaderCellDef mat-sort-header>{{'Transactions.ManageTransactionComponent.productId2'|translate}}</th>
        <td mat-cell fxHide fxShow.gt-md *matCellDef="let transaction" style="width: 100px">
          <span
            *ngIf="transaction.isHold != '0'"
            matBadge="Treo"
            matBadgePosition="after"
            matBadgeColor="accent"
            matBadgeSize="small"
          >
          </span>

          <span class="productId">
            {{ displayProductId(transaction.productId) }}
          </span>
        </td>
      </ng-container>

      <ng-container matColumnDef="txnDate">
        <th mat-header-cell fxHide fxShow.gt-md *matHeaderCellDef mat-sort-header>{{'Transactions.ManageTransactionComponent.txnDate'|translate}}</th>
        <td mat-cell fxHide fxShow.gt-md style="word-wrap: break-word; width: 150px" *matCellDef="let journalEntry">
          <span [ngSwitch]="journalEntry.status">
            <img *ngSwitchCase="'C'" src="assets/images/icons/check.svg" />
            <img *ngSwitchCase="'P'" src="assets/images/icons/pending.svg" />
            <img *ngSwitchCase="'V'" src="assets/images/icons/cancel.svg" />
            <img *ngSwitchDefault src="assets/images/icons/question.svg" />
          </span>
          {{ journalEntry.txnDate | date: "dd-MM-yyyy HH:mm:ss" }}
          <br />
          <span class="green_text">{{ journalEntry.trnRefNo }}</span>
          <br />
          <label class="red_text" *ngIf="checkB(journalEntry.type)">
            {{ journalEntry.type }}
          </label>
        </td>
      </ng-container>

      <ng-container matColumnDef="officeName">
        <th fxHide fxShow.gt-md mat-header-cell *matHeaderCellDef mat-sort-header>
          {{'Transactions.ManageTransactionComponent.createdByName'|translate}}<br />
          {{'Transactions.ManageTransactionComponent.terminalId2'|translate}}
        </th>
        <td fxHide fxShow.gt-md mat-cell *matCellDef="let journalEntry" style="word-wrap: break-word; width: 200px">
          <!-- {{ journalEntry.officeName }} <br /> -->
          <span class="blue_text">{{ journalEntry.createdByName }} </span><br />
          <span class="red_text">{{ displayTerminalName(journalEntry.terminalId) }}</span><br />
          <span class="green_text">{{ journalEntry.officeName }} </span>
        </td>
      </ng-container>

      <ng-container matColumnDef="panHolderName">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>{{'Transactions.ManageTransactionComponent.panHolderName2'|translate}}</th>
        <td mat-cell *matCellDef="let journalEntry">
          {{ journalEntry.panHolderName }} <br />
          <span class="green_text">{{ journalEntry.agencyName == "#" ? "" : journalEntry.agencyName }}</span>
        </td>
      </ng-container>

      <ng-container matColumnDef="panBank">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>
          {{'Transactions.ManageTransactionComponent.panNumber'|translate}}<br />
          {{'Transactions.ManageTransactionComponent.panBank'|translate}}
        </th>
        <td mat-cell *matCellDef="let journalEntry">
          {{ journalEntry.panNumber.replace("XXX-XXX", "X") }} <br />
          <span class="blue_text">({{ journalEntry.panBank }})</span>
        </td>
      </ng-container>

      <ng-container matColumnDef="terminalAmount">
        <th mat-header-cell *matHeaderCellDef mat-sort-header>{{'Transactions.ManageTransactionComponent.terminalAmount2'|translate}}</th>
        <td mat-cell style="padding: 6px; text-align: right;" *matCellDef="let transaction" >
          {{ transaction.terminalAmount | money }}

          <span *midasHasPermission="'BILLER_HO'">
            <button title="Tải hóa đơn" mat-icon-button (click)="downloadVoucher(transaction.refid)" color="accent" >
              <i class="fad fa-file-invoice-dollar" style="font-size: 1.25rem;"></i>
            </button>
          </span>
          <br />
          <span
            *ngIf="transaction.isSubmit == 1"
            style="color: white; font-weight: bold; background-color: black;"

          >
          {{'Transactions.ManageTransactionComponent.confirmed'|translate}}
          </span>
        </td>
      </ng-container>

      <ng-container matColumnDef="feeAmount">
        <th mat-header-cell fxHide fxShow.gt-md *matHeaderCellDef mat-sort-header>{{'Transactions.ManageTransactionComponent.feeAmount'|translate}}</th>
        <td mat-cell fxHide fxShow.gt-md *matCellDef="let journalEntry" style="padding: 6px; text-align: right;">
          <label>{{ journalEntry.feeAmount | money }}</label>
        </td>
      </ng-container>

      <ng-container matColumnDef="terminalAmount_feeAmount">
        <th mat-header-cell fxHide fxShow.gt-md *matHeaderCellDef mat-sort-header>{{'Transactions.ManageTransactionComponent.terminalAmount_feeAmount'|translate}}</th>
        <td mat-cell fxHide fxShow.gt-md *matCellDef="let journalEntry" style="padding: 6px; text-align: right;">
          {{ journalEntry.terminalAmount_feeAmount | number }}%
        </td>
      </ng-container>

      <ng-container matColumnDef="pnlAmount">
        <th mat-header-cell fxHide fxShow.gt-md *matHeaderCellDef mat-sort-header>{{'Transactions.ManageTransactionComponent.PNL2'|translate}}</th>
        <td mat-cell fxHide fxShow.gt-md *matCellDef="let transaction" style="padding: 6px; text-align: right;">
          <span *midasHasPermission="'POS_UPDATE'">{{ transaction.pnlAmount | money }}</span>
        </td>
      </ng-container>

      <ng-container matColumnDef="actions" style="width: 25px; text-align: right">
        <th mat-header-cell *matHeaderCellDef mat-sort-header></th>
        <td mat-cell *matCellDef="let transaction">
          <span
            style="float: right; width: 15px"
            [matMenuTriggerData]="transaction"
            [matMenuTriggerFor]="transactionMenu"
            (menuOpened)="menuOpened()"
            (menuClosed)="menuClosed()"
          ><i class="fa fa-ellipsis-v" aria-hidden="true"></i
          ></span>
        </td>
      </ng-container>
      <ng-container matColumnDef="expandedDetail">
        <td mat-cell fxShow fxHide.gt-md *matCellDef="let element" [attr.colspan]="displayedColumns.length">
          <div class="example-element-detail" [@detailExpand]="element == expandedElement ? 'expanded' : 'collapsed'">
            <ul class="example-element-description" fxLayout="column">
              <li><span style="font-weight: bold"> {{'Transactions.ManageTransactionComponent.productId3'|translate}}</span>&nbsp;{{ element.productId }}</li>
              <li><span style="font-weight: bold">{{'Transactions.ManageTransactionComponent.createdByName2'|translate}}</span> {{ element.createdByName }}</li>
              <li><span style="font-weight: bold">{{'Transactions.ManageTransactionComponent.terminalId3'|translate}}</span> {{ element.terminalId }}</li>
              <li>
                <span style="font-weight: bold"> {{'Transactions.ManageTransactionComponent.txnDate2'|translate}}</span>&nbsp; &nbsp;{{
                element.txnDate | date: "dd-MM-yyyy HH:ss"
                }}
              </li>
              <li><span style="font-weight: bold"> {{'Transactions.ManageTransactionComponent.trnRefNo2'|translate}}</span>&nbsp; &nbsp;{{ element.trnRefNo }}</li>
              <li>
                <span style="font-weight: bold"> {{'Transactions.ManageTransactionComponent.status2'|translate}}</span>&nbsp; &nbsp;
                <span [ngSwitch]="element.status">
                  <img *ngSwitchCase="'C'" src="assets/images/icons/check.svg" />
                  <img *ngSwitchCase="'P'" src="assets/images/icons/pending.svg" />
                  <img *ngSwitchCase="'V'" src="assets/images/icons/cancel.svg" />
                  <img *ngSwitchDefault src="assets/images/icons/question.svg" />
                </span>
              </li>
              <li>
                 <span style="font-weight: bold"> {{'Transactions.ManageTransactionComponent.feeAmount2'|translate}}</span>&nbsp; &nbsp;{{ element.feeAmount | money }}
              </li>
              <li><span style="font-weight: bold"> {{'Transactions.ManageTransactionComponent.cogsAmount'|translate}}</span>&nbsp; &nbsp;{{ element.cogsAmount | money }}</li>
              <li *midasHasPermission="'POS_UPDATE'">
                <span style="font-weight: bold"> {{'Transactions.ManageTransactionComponent.PNL3'|translate}}</span>&nbsp; &nbsp;{{ element.pnlAmount | money }}
              </li>
            </ul>
          </div>
        </td>
      </ng-container>
<!--  Phần render table gồm:
        - Header
        - Dòng thông tin bình thường
        - Dòng thông tin mở rông cho mobile UI
-->
      <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
      <tr
        mat-row
        *matRowDef="let element; columns: displayedColumns"
        class="example-element-row"
        [class.example-expanded-row]="expandedElement === element"
        (click)="expandedElement = expandedElement === element ? null : element"
      ></tr>
      <tr mat-row *matRowDef="let row; columns: ['expandedDetail']" class="example-detail-row"></tr>
<!--  Kết thúc    -->
    </table>
  </div>
  <mat-paginator
      paginator
      [length]="filterData?.length"
      [pageSize]="10"
      [pageSizeOptions]="[10, 25, 50, 100]"
      showFirstLastButtons
    ></mat-paginator>

<!--  Kết thúc tables -->

  </mat-card-content>


<!-- Menu  -->
  <mat-menu #transactionMenu="matMenu" [overlapTrigger]="false" style="width: 50px">
    <ng-template
      matMenuContent
      let-custId="custId"
      let-type="type"
      let-status="status"
      let-txnDate="txnDate"
      let-ext7="ext7"
      let-agencyId="agencyId"
      let-refid="refid"
      let-trnRefNo="trnRefNo"
      let-batchNo="batchNo"
      let-traceNo="traceNo"
      let-isHold="isHold"
      style="width: 50px"
      let-isSubmit="isSubmit"
    >
      <div *ngIf="isHold != '0'">
        <div *midasHasPermission="'POS_UPDATE'">
          <button *ngIf="status == 'C'" mat-menu-item (click)="updateIsHoldTransaction(trnRefNo, refid)">
            <i class="fa fa-anchor" aria-hidden="true"></i> &nbsp;{{'Transactions.ManageTransactionComponent.updateIsHoldTransaction'|translate}}
          </button>
        </div>
        <button
          mat-menu-item
          [routerLink]="['/transaction/batch-transaction/', agencyId]"
          [queryParams]="{ batchTxnName: type }"
          *ngIf="
            type != 'rollTerm' &&
            type != 'cash' &&
            status == 'C' &&
            (today | date: 'dd/MM/yyyy') == (txnDate | date: 'dd/MM/yyyy')
          "
        >
          <img src="assets/images/icons/next.svg" />&nbsp;{{'Transactions.ManageTransactionComponent.next'|translate}}
        </button>
        <button mat-menu-item [routerLink]="['/transaction', 'view']" [queryParams]="{ tranId: refid }">
          <i class="fa fa-eye" aria-hidden="true"></i>&nbsp;{{'Transactions.ManageTransactionComponent.details'|translate}}
        </button>
      </div>
      <div *ngIf="isHold == '0'">
        <button
          mat-menu-item
          [routerLink]="['/transaction/batch-transaction/', agencyId]"
          [queryParams]="{ batchTxnName: type }"
          *ngIf="
            type != 'rollTerm' &&
            type != 'cash' &&
            status == 'C' &&
            (today | date: 'dd/MM/yyyy') == (txnDate | date: 'dd/MM/yyyy')
          "
        >
          <img src="assets/images/icons/next.svg" />&nbsp;{{'Transactions.ManageTransactionComponent.next2'|translate}}
        </button>
        <button mat-menu-item [routerLink]="['/transaction', 'view']" [queryParams]="{ tranId: refid }">
          <i class="fa fa-eye" aria-hidden="true"></i>&nbsp;{{'Transactions.ManageTransactionComponent.details2'|translate}}
        </button>
        <button
          *midasHasPermission="'TRACE_BATCH_NO_UPDATE'"
          mat-menu-item
          (click)="addPosInformation(trnRefNo, batchNo, traceNo)"
        >
          <img src="assets/images/icons/add.svg" /> {{'Transactions.ManageTransactionComponent.addPosInformation'|translate}}
        </button>
        <button mat-menu-item (click)="downloadVoucher(refid)">
          <img *ngIf="status != 'V'" src="assets/images/icons/order.svg" />&nbsp; {{'Transactions.ManageTransactionComponent.downloadVoucher'|translate}}
        </button>
        <hr />
        <button
          mat-menu-item
          *ngIf="
            status == 'V' &&
            type != 'rollTerm' &&
            (today | date: 'dd/MM/yyyy') == (txnDate | date: 'dd/MM/yyyy') &&
            isSubmit == 0
          "
          (click)="undoRevertTransaction(refid)"
        >
          <i class="fa fa-undo" aria-hidden="true"></i> &nbsp;{{'Transactions.ManageTransactionComponent.undoRevertTransaction'|translate}}
        </button>
        <button
          mat-menu-item
          *ngIf="status != 'V' && (today | date: 'dd/MM/yyyy') == (txnDate | date: 'dd/MM/yyyy') && isSubmit == 0"
          (click)="revertTransaction(refid, trnRefNo)"
        >
          <i class="fa fa-ban" aria-hidden="true"></i> &nbsp;{{'Transactions.ManageTransactionComponent.revertTransaction'|translate}}
        </button>
      </div>
    </ng-template>
  </mat-menu>
  <div *ngIf="isLoading" style="display: flex; justify-content: center; align-items: center; background: white">
    <mat-progress-spinner color="warn" mode="indeterminate"> </mat-progress-spinner>
  </div>

</mat-card>


</div>
